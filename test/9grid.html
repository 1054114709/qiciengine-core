<!DOCTYPE html>
<html>
<head>
    <title>UIImange组件</title>
    <meta charset="UTF-8">

    <style type="text/css">
        div { padding: 10px; font-size: 1.5em; }
    </style>

    <script src="../lib/phaser.js" type="text/javascript"></script>
    <script src="../build/qc-core-debug.js" type="text/javascript"></script>
</head>
<body>
<script type="application/javascript" src="js/builtinStartGame.js"></script>

<script>
    var Assets = qc.Assets;
    game._onFirstScenePreload = function() {
        game.assets.load('firstaid', 'assets/sprites/firstaid.bin');
    }

    game._onFirstSceneLoaded = function() {
        imageNormal = game.add.image();
        imageNormal.texture = game.assets.find('firstaid');
        imageNormal.borderLeft = 20;
        imageNormal.borderRight = 20;
        imageNormal.borderBottom = 20;
        imageNormal.borderTop = 20;
        imageNormal.width = 300;
        imageNormal.height = 300;
        imageNormal.x = 200;
        imageNormal.y = 200;
        imageNormal.imageType = qc.UIImage.IMAGE_TYPE_TILED;
        imageNormal.pivotX = 0.5;
        imageNormal.pivotY = 0.5;
        imageNormal.update = function() {
            imageNormal.rotation += 0.005;
            if (Math.random() < 0.01)
                imageNormal.imageType = Math.random() < 0.5 ? qc.UIImage.IMAGE_TYPE_TILED :
                        qc.UIImage.IMAGE_TYPE_SLICED;
        };

        // 动态加载图片并构造之
        game.assets.load('monsters', 'assets/sprites/test1.bin', function(data) {
            imageAtlas = game.add.image();
            imageAtlas.x = 500.5;
            imageAtlas.y = 200.2;
            imageAtlas.texture = game.assets.find('monsters');
            imageAtlas.frame = frameIndex = 0;
            imageAtlas.borderTop = 0;
            imageAtlas.borderLeft = 0;
            imageAtlas.borderRight = 0;
            imageAtlas.borderBottom = 0;
            imageAtlas.imageType = qc.UIImage.IMAGE_TYPE_TILED;
            imageAtlas.width = 500;
            imageAtlas.height = 600;
            imageAtlas.pivotX = 0.3;
            imageAtlas.pivotY = 0.4;
            i = 0;
            imageAtlas.update = function() {
                imageAtlas.x = 500 + (i++/10)/10;
                imageAtlas.y = 200 + (i++/10)/10;
//                if (Math.random() < 0.01)
//                    imageAtlas.imageType = Math.random() < 0.5 ? qc.UIImage.IMAGE_TYPE_TILED :
//                            qc.UIImage.IMAGE_TYPE_SLICED;
            }
        });
    }
</script>
</body>
</html>
