<!DOCTYPE html>
<html>
<head>
    <title>QCEngine</title>
    <meta charset="UTF-8">

    <script src="../lib/phaser.js" type="text/javascript"></script>
    <script src="../build/qc-core-debug.js" type="text/javascript"></script>
    <script>
        function init() {

            game = new qc.Game(900, 500, "", {
                create : function() {
                    game.assets.load('bot', 'assets/sprites/running_bot.bin',
                            function() {
                                // 动态加载图片并构造之
                                bot = new qc.Sprite(game);
                                bot.x = 100;
                                bot.y = 200;
                                bot.texture = game.assets.find('bot');
                                bot.playAnimation('run1', 1.5 /* 倍率 */, true /* 循环 */);
                            });

                    // 循环播放各个动作
                    var animations = [ "run1", "run2" ];
                    var curr = 0;
                    game.timer.loop(3000, function() {
                        if (++curr >= animations.length) curr = 0;
                        if (!bot) return;
                        bot.playAnimation(animations[curr], game.math.random(0.1, 5), true);
                    });

                    // 创建一个text 用于显示游戏的启动时间
                    bootTimeText = game.add.text();
                    bootTimeText.x = 400;
                    bootTimeText.y = 0;
                    bootTimeText.color = new qc.Color(0xff0000);

                    // 创建一个text 用户显示现在的时间
                    nowTimeText = game.add.text();
                    nowTimeText.x = 400;
                    nowTimeText.y = 50;
                    nowTimeText.color = new qc.Color(0xff0000);
                    nowTimeText.width = 400;

                    // 创建一个定时器不断刷新
                    game.timer.loop(200, function() {
                        bootTimeText.text = "游戏已经启动了 " + game.math.fuzzyCeil(game.time.fixedTime, 0) + "秒";
                        nowTimeText.text = "现在的时间戳为：" + game.time.now;
                    })
                }
            });
        }
    </script>
</head>
<body onload="init();">
<ul>
    <li><a href="javascript:timeScaleHalf()">时间缩放为默认的一半</a></li>
    <li><a href="javascript:recoverTimeScale()">恢复默认时间缩放</a></li>
    <li><a href="javascript:frameRateHalf()">设置帧率为10</a></li>
    <li><a href="javascript:recoverFrameRate()">设置帧率为60</a></li>

</ul>
<script type="application/javascript">
    function timeScaleHalf() {
        game.time.timeScale = 2;
    }
    function recoverTimeScale() {
        game.time.timeScale = 1;
    }
    function frameRateHalf() {
        game.time.frameRate = 30;
    }
    function recoverFrameRate() {
        game.time.frameRate = 60;
    }
</script>
</body>
</html>